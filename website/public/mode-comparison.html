<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GradeView - Mode Comparison</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            max-width: 1400px;
            margin: 20px auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .container {
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        h1 {
            color: #1e3a8a;
            margin-bottom: 10px;
        }
        .subtitle {
            color: #6b7280;
            margin-bottom: 30px;
            font-size: 18px;
        }
        .comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-top: 30px;
        }
        .mode-box {
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            padding: 20px;
            background: #f9fafb;
        }
        .mode-box h2 {
            color: #1976d2;
            margin-top: 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .mode-box h3 {
            color: #374151;
            font-size: 16px;
            margin: 20px 0 10px 0;
            border-bottom: 1px solid #d1d5db;
            padding-bottom: 5px;
        }
        .feature-list {
            list-style: none;
            padding: 0;
        }
        .feature-list li {
            padding: 8px 0;
            display: flex;
            align-items: start;
        }
        .feature-list li::before {
            content: "âœ“";
            color: #10b981;
            font-weight: bold;
            margin-right: 10px;
            font-size: 18px;
        }
        .data-example {
            background: white;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            padding: 12px;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
            font-size: 13px;
        }
        .highlight {
            background: #fef3c7;
            padding: 2px 6px;
            border-radius: 3px;
            font-weight: 600;
        }
        .instruction-box {
            background: #dbeafe;
            border-left: 4px solid #1976d2;
            padding: 15px 20px;
            margin: 20px 0;
            border-radius: 4px;
        }
        .instruction-box strong {
            color: #1e40af;
        }
        .api-test {
            margin-top: 30px;
            padding: 20px;
            background: #f0fdf4;
            border: 1px solid #86efac;
            border-radius: 8px;
        }
        .api-test button {
            background: #1976d2;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            margin: 5px;
        }
        .api-test button:hover {
            background: #1565c0;
        }
        #apiResult {
            margin-top: 15px;
            padding: 15px;
            background: white;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            white-space: pre-wrap;
            font-family: monospace;
            font-size: 12px;
            max-height: 300px;
            overflow-y: auto;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ“Š GradeView - æ’åºæ¨¡å¼å¯¹æ¯”è¯´æ˜</h1>
        <p class="subtitle">ç†è§£ä¸¤ç§æ’åºæ¨¡å¼çš„åŒºåˆ«</p>

        <div class="instruction-box">
            <strong>ğŸ¯ å¦‚ä½•æŸ¥çœ‹å˜åŒ–ï¼š</strong>
            <ol style="margin: 10px 0 0 20px;">
                <li>æ‰“å¼€ <a href="http://localhost:3000" target="_blank">http://localhost:3000</a></li>
                <li>è¿›å…¥ Admin é¡µé¢</li>
                <li>ç‚¹å‡»ä»»æ„å­¦ç”Ÿåå­—æ‰“å¼€è¯¦ç»†å¯¹è¯æ¡†</li>
                <li><strong style="color: #dc2626;">ç‚¹å‡»å¯¹è¯æ¡†å³ä¸Šè§’çš„åˆ‡æ¢æŒ‰é’®</strong>ï¼ˆğŸ“Š By Assignment â†”ï¸ ğŸ• By Timeï¼‰</li>
                <li>è§‚å¯Ÿå›¾è¡¨å’Œè¡¨æ ¼çš„å˜åŒ–</li>
            </ol>
        </div>

        <div class="comparison">
            <div class="mode-box">
                <h2>ğŸ“Š By Assignmentï¼ˆæŒ‰ä½œä¸šï¼‰</h2>
                
                <h3>å›¾è¡¨ç‰¹å¾ï¼š</h3>
                <ul class="feature-list">
                    <li>æ ‡é¢˜ï¼šScore Trend <span class="highlight">(Sorted by Assignment)</span></li>
                    <li>Xè½´ï¼š<span class="highlight">Assignment #</span></li>
                    <li>æ•°æ®ç‚¹æ•°é‡ï¼š<span class="highlight">86ä¸ª</span>ï¼ˆæ‰€æœ‰ä½œä¸šï¼‰</li>
                    <li>æ’åºæ–¹å¼ï¼šæŒ‰ç±»åˆ«å’Œä½œä¸šåç§°</li>
                </ul>

                <h3>ç¤ºä¾‹æ•°æ®é¡ºåºï¼š</h3>
                <div class="data-example">
1. Quest (pre-clobber) - Lecture Quiz 1<br>
2. Quest (pre-clobber) - Lecture Quiz 2<br>
3. Quest (pre-clobber) - Lecture Quiz 3<br>
...<br>
30. Projects - Project 1<br>
31. Projects - Project 2<br>
...<br>
86. Postterm - Final
                </div>

                <h3>è¡¨æ ¼ç‰¹å¾ï¼š</h3>
                <ul class="feature-list">
                    <li>åˆ—ï¼š# | Category | Assignment | Score | Max | % | Grade</li>
                    <li><strong>æ— </strong> Submitted åˆ—</li>
                    <li>æŒ‰ç±»åˆ«åˆ†ç»„æ’åº</li>
                </ul>
            </div>

            <div class="mode-box">
                <h2>ğŸ• By Timeï¼ˆæŒ‰æ—¶é—´ï¼‰</h2>
                
                <h3>å›¾è¡¨ç‰¹å¾ï¼š</h3>
                <ul class="feature-list">
                    <li>æ ‡é¢˜ï¼šScore Trend <span class="highlight">(Sorted by Submission Time)</span></li>
                    <li>Xè½´ï¼š<span class="highlight">Submission Order</span></li>
                    <li>æ•°æ®ç‚¹æ•°é‡ï¼š<span class="highlight">43ä¸ª</span>ï¼ˆå·²æäº¤ä½œä¸šï¼‰</li>
                    <li>æ’åºæ–¹å¼ï¼šæŒ‰æäº¤æ—¶é—´å€’åºï¼ˆæœ€æ–°åœ¨å‰ï¼‰</li>
                </ul>

                <h3>ç¤ºä¾‹æ•°æ®é¡ºåºï¼š</h3>
                <div class="data-example">
1. Project 5 RESUBMISSION (2025-12-16)<br>
2. Project 5 (2025-12-06)<br>
3. Postterm 1 (2025-11-23)<br>
...<br>
41. Lecture Quiz 2 (2025-08-28)<br>
42. Lecture Quiz 3 (2025-08-28)<br>
43. Lecture Quiz 1 (2025-08-27)
                </div>

                <h3>è¡¨æ ¼ç‰¹å¾ï¼š</h3>
                <ul class="feature-list">
                    <li>åˆ—ï¼š# | Category | Assignment | Score | Max | % | Grade | <strong style="color: #dc2626;">Submitted</strong></li>
                    <li><strong>æ–°å¢</strong> Submitted åˆ—æ˜¾ç¤ºæäº¤æ—¶é—´</li>
                    <li>æŒ‰æ—¶é—´å€’åºæ’åˆ—</li>
                    <li>è¿Ÿäº¤æ˜¾ç¤ºçº¢è‰² "Late" å¾½ç« </li>
                </ul>

                <h3>Tooltip å¢å¼ºï¼š</h3>
                <div class="data-example">
<strong>Assignment Name</strong><br>
Score: 90.00%<br>
<strong style="color: #dc2626;">Submitted: Nov 23, 2025 14:30</strong> â† æ–°å¢
                </div>
            </div>
        </div>

        <div class="api-test">
            <h2 style="margin-top: 0; color: #065f46;">ğŸ” å®æ—¶APIæ•°æ®å¯¹æ¯”æµ‹è¯•</h2>
            <p>ç‚¹å‡»æŒ‰é’®æŸ¥çœ‹ä¸¤ç§æ¨¡å¼è¿”å›çš„å®é™…æ•°æ®å·®å¼‚ï¼š</p>
            <button onclick="testAssignmentMode()">æµ‹è¯• Assignment æ¨¡å¼</button>
            <button onclick="testTimeMode()">æµ‹è¯• Time æ¨¡å¼</button>
            <button onclick="compareData()">å¯¹æ¯”æ•°æ®å·®å¼‚</button>
            <div id="apiResult"></div>
        </div>
    </div>

    <script>
        const API_BASE = 'http://localhost:8000/api/v2';
        const TEST_EMAIL = 'jippebraams@berkeley.edu';

        async function testAssignmentMode() {
            const resultDiv = document.getElementById('apiResult');
            resultDiv.textContent = 'åŠ è½½ä¸­...';
            
            try {
                const response = await fetch(`${API_BASE}/students/${encodeURIComponent(TEST_EMAIL)}/grades`);
                const data = await response.json();
                
                const categories = Object.keys(data);
                let totalAssignments = 0;
                const sampleAssignments = [];
                
                categories.forEach(cat => {
                    const assignments = Object.keys(data[cat]);
                    totalAssignments += assignments.length;
                    if (sampleAssignments.length < 5) {
                        assignments.slice(0, 3).forEach(name => {
                            sampleAssignments.push(`${cat} - ${name}`);
                        });
                    }
                });
                
                resultDiv.textContent = `âœ… Assignment æ¨¡å¼æ•°æ®ï¼š\n\n` +
                    `æ€»ä½œä¸šæ•°ï¼š${totalAssignments}\n` +
                    `ç±»åˆ«æ•°ï¼š${categories.length}\n` +
                    `ç±»åˆ«ï¼š${categories.join(', ')}\n\n` +
                    `å‰5ä¸ªä½œä¸šç¤ºä¾‹ï¼š\n${sampleAssignments.slice(0, 5).map((a, i) => `  ${i+1}. ${a}`).join('\n')}`;
            } catch (error) {
                resultDiv.textContent = `âŒ é”™è¯¯ï¼š${error.message}`;
            }
        }

        async function testTimeMode() {
            const resultDiv = document.getElementById('apiResult');
            resultDiv.textContent = 'åŠ è½½ä¸­...';
            
            try {
                const response = await fetch(`${API_BASE}/students/${encodeURIComponent(TEST_EMAIL)}/grades?sort=time`);
                const data = await response.json();
                
                const submissions = data.submissions || [];
                
                resultDiv.textContent = `âœ… Time æ¨¡å¼æ•°æ®ï¼š\n\n` +
                    `æ€»æäº¤æ•°ï¼š${submissions.length}\n` +
                    `æ’åºæ–¹å¼ï¼š${data.sortBy}\n\n` +
                    `å‰5ä¸ªæäº¤ï¼ˆæŒ‰æ—¶é—´å€’åºï¼‰ï¼š\n${submissions.slice(0, 5).map((s, i) => 
                        `  ${i+1}. ${s.name}\n     æäº¤æ—¶é—´ï¼š${s.submissionTime}\n     åˆ†æ•°ï¼š${s.score}/${s.maxPoints} (${s.percentage.toFixed(2)}%)`
                    ).join('\n\n')}`;
            } catch (error) {
                resultDiv.textContent = `âŒ é”™è¯¯ï¼š${error.message}`;
            }
        }

        async function compareData() {
            const resultDiv = document.getElementById('apiResult');
            resultDiv.textContent = 'åŠ è½½å¹¶å¯¹æ¯”æ•°æ®...';
            
            try {
                const [assignmentResponse, timeResponse] = await Promise.all([
                    fetch(`${API_BASE}/students/${encodeURIComponent(TEST_EMAIL)}/grades`),
                    fetch(`${API_BASE}/students/${encodeURIComponent(TEST_EMAIL)}/grades?sort=time`)
                ]);
                
                const assignmentData = await assignmentResponse.json();
                const timeData = await timeResponse.json();
                
                const categories = Object.keys(assignmentData);
                let totalAssignments = 0;
                categories.forEach(cat => {
                    totalAssignments += Object.keys(assignmentData[cat]).length;
                });
                
                const submissions = timeData.submissions || [];
                
                resultDiv.textContent = `ğŸ“Š æ•°æ®å¯¹æ¯”åˆ†æï¼š\n\n` +
                    `â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n` +
                    `Assignment æ¨¡å¼ï¼š\n` +
                    `  â€¢ æ€»ä½œä¸šæ•°ï¼š${totalAssignments}\n` +
                    `  â€¢ ç±»åˆ«æ•°ï¼š${categories.length}\n` +
                    `  â€¢ æ•°æ®ç»“æ„ï¼šæŒ‰ç±»åˆ«åˆ†ç»„çš„å¯¹è±¡\n` +
                    `  â€¢ åŒ…å«ï¼šæ‰€æœ‰ä½œä¸šï¼ˆåŒ…æ‹¬æœªæäº¤ï¼‰\n\n` +
                    `â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n` +
                    `Time æ¨¡å¼ï¼š\n` +
                    `  â€¢ æ€»æäº¤æ•°ï¼š${submissions.length}\n` +
                    `  â€¢ æ’åºæ–¹å¼ï¼šæŒ‰æäº¤æ—¶é—´å€’åº\n` +
                    `  â€¢ æ•°æ®ç»“æ„ï¼šæäº¤æ•°ç»„\n` +
                    `  â€¢ åŒ…å«ï¼šä»…å·²æäº¤ä½œä¸š\n\n` +
                    `â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n` +
                    `å…³é”®å·®å¼‚ï¼š\n` +
                    `  âš ï¸  æ•°æ®ç‚¹æ•°é‡ä¸åŒï¼š${totalAssignments} vs ${submissions.length}\n` +
                    `  âš ï¸  æ’åºé€»è¾‘ä¸åŒï¼šç±»åˆ«/åç§° vs æ—¶é—´\n` +
                    `  âš ï¸  Timeæ¨¡å¼åŒ…å«æäº¤æ—¶é—´ä¿¡æ¯\n` +
                    `  âš ï¸  Timeæ¨¡å¼ä»…æ˜¾ç¤ºå·²æäº¤ä½œä¸š\n\n` +
                    `ğŸ’¡ è¿™å°±æ˜¯ä¸ºä»€ä¹ˆåˆ‡æ¢æ¨¡å¼åå›¾è¡¨ä¼šæ˜æ˜¾ä¸åŒï¼`;
            } catch (error) {
                resultDiv.textContent = `âŒ é”™è¯¯ï¼š${error.message}`;
            }
        }
    </script>
</body>
</html>
